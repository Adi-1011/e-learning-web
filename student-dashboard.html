<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnSTACK | Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/student-dashboard.css">
</head>
<body>
 



    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="logo">Learn<span>STACK</span></div>
        <div class="sidebar-close">
            <span></span>
            <span></span>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li class="active"><a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#"><i class="fas fa-book"></i> Courses</a></li>
                <li><a href="#"><i class="fas fa-tasks"></i> Assignments</a></li>
                <li><a href="#"><i class="fas fa-chart-bar"></i> Progress</a></li>
                <li><a href="#"><i class="fas fa-calendar"></i> Schedule</a></li>
                <li><a href="#"><i class="fas fa-comments"></i> Messages</a></li>
                <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Search...">
                <button><i></i> class="fas fa-search"></i></button>
            </div>
            <div class="user-menu">
                <div class="notifications">
                    <i class="fas fa-bell"></i>
                    <span class="badge">3</span>
                </div>
                <div class="user-profile">
                    <img src="Assets/avatar.png" alt="User Avatar">
                    <span>John Doe</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="dashboard-container">
            <!-- Welcome Section -->
            <section class="welcome-section">
                <h2>Welcome, <span id="student-name">Loading...</span></h2>

                <p>Here's an overview of your learning progress</p>
            </section>

            <!-- Stats Cards -->
            <section class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon courses-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stat-info">
                        <h3>5</h3>
                        <p>Active Courses</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon assignments-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-info">
                        <h3>3</h3>
                        <p>Pending Assignments</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon completion-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="stat-info">
                        <h3>67%</h3>
                        <p>Average Completion</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon grade-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <div class="stat-info">
                        <h3>B+</h3>
                        <p>Average Grade</p>
                    </div>
                </div>
            </section>

            <!-- Recent Activities and Upcoming Deadlines -->
            <div class="dashboard-widgets">
                <!-- Recent Activities -->
                <section class="widget recent-activities">
                    <div class="widget-header">
                        <h2>Recent Activities</h2>
                        <a href="#" class="view-all">View All</a>
                    </div>
                    <div class="widget-content">
                        <ul class="activity-list">
                            <li>
                                <div class="activity-icon"><i class="fas fa-file-alt"></i></div>
                                <div class="activity-info">
                                    <p>Assignment submitted: <strong>Research Paper</strong></p>
                                    <span class="timestamp">Today, 9:30 AM</span>
                                </div>
                            </li>
                            <li>
                                <div class="activity-icon"><i class="fas fa-comments"></i></div>
                                <div class="activity-info">
                                    <p>New comment on: <strong>Group Discussion 3</strong></p>
                                    <span class="timestamp">Yesterday, 4:15 PM</span>
                                </div>
                            </li>
                            <li>
                                <div class="activity-icon"><i class="fas fa-play-circle"></i></div>
                                <div class="activity-info">
                                    <p>Completed lecture: <strong>Introduction to Data Structures</strong></p>
                                    <span class="timestamp">Apr 3, 2:45 PM</span>
                                </div>
                            </li>
                            <li>
                                <div class="activity-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="activity-info">
                                    <p>Quiz completed: <strong>Web Development Basics</strong></p>
                                    <span class="timestamp">Apr 2, 11:20 AM</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Upcoming Deadlines -->
                <section class="widget upcoming-deadlines">
                    <div class="widget-header">
                        <h2>Upcoming Deadlines</h2>
                        <a href="#" class="view-all">View All</a>
                    </div>
                    <div class="widget-content">
                        <ul class="deadline-list">
                            <li>
                                <div class="deadline-date">
                                    <span class="day">07</span>
                                    <span class="month">Apr</span>
                                </div>
                                <div class="deadline-info">
                                    <h4>Database Design Project</h4>
                                    <p>CS301 - Database Management</p>
                                </div>
                                <div class="deadline-status urgent">Due in 2 days</div>
                            </li>
                            <li>
                                <div class="deadline-date">
                                    <span class="day">10</span>
                                    <span class="month">Apr</span>
                                </div>
                                <div class="deadline-info">
                                    <h4>Mobile App Wireframes</h4>
                                    <p>DES210 - UI/UX Design</p>
                                </div>
                                <div class="deadline-status">Due in 5 days</div>
                            </li>
                            <li>
                                <div class="deadline-date">
                                    <span class="day">15</span>
                                    <span class="month">Apr</span>
                                </div>
                                <div class="deadline-info">
                                    <h4>Mid-Term Exam</h4>
                                    <p>CS401 - Advanced Algorithms</p>
                                </div>
                                <div class="deadline-status">Due in 10 days</div>
                            </li>
                        </ul>
                    </div>
                </section>
            </div>

            <!-- Course Progress -->
            <section class="course-progress">
                <div class="widget-header">
                    <h2>Course Progress</h2>
                    <a href="#" class="view-all">View All Courses</a>
                </div>
                <div class="courses-grid">
                    <div class="course-card">
                        <h3>Web Development</h3>
                        <div class="progress-bar">
                            <div class="progress" style="width: 75%"></div>
                        </div>
                        <div class="course-details">
                            <span>75% Complete</span>
                            <a href="#" class="btn">Continue</a>
                        </div>
                    </div>
                    <div class="course-card">
                        <h3>Data Structures</h3>
                        <div class="progress-bar">
                            <div class="progress" style="width: 60%"></div>
                        </div>
                        <div class="course-details">
                            <span>60% Complete</span>
                            <a href="#" class="btn">Continue</a>
                        </div>
                    </div>
                    <div class="course-card">
                        <h3>UI/UX Design</h3>
                        <div class="progress-bar">
                            <div class="progress" style="width: 45%"></div>
                        </div>
                        <div class="course-details">
                            <span>45% Complete</span>
                            <a href="#" class="btn">Continue</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script src="js/student-dashboard.js"></script>
</body>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
  
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
  
    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = "login.html";
      } else {
        const userRef = doc(db, "users", user.uid);
        const userSnap = await getDoc(userRef);
        if (userSnap.exists()) {
          const userData = userSnap.data();
          if (userData.role !== "student") {
            alert("Access Denied");
            window.location.href = "login.html";
          } else {
            // ✅ Optionally display student name/email on dashboard
            document.getElementById("student-name").innerText = userData.name || user.email;
            // More personalized features can be added here
          }
        } else {
          alert("User record not found.");
          window.location.href = "login.html";
        }
      }
    });
  </script>
  
</html>